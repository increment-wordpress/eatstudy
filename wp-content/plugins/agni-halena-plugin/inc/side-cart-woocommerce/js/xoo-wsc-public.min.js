jQuery(document).ready(function(o){"use strict";function t(t){var c=o(".xoo-wsc-modal , body"),a="xoo-wsc-active";"show"==t?c.addClass(a):"hide"==t?c.removeClass(a):c.toggleClass("xoo-wsc-active")}function c(){var t=o(".xoo-wsc-header").outerHeight(),c=o(".xoo-wsc-footer").outerHeight(),a=o(window).height();o(".xoo-wsc-body").height(a-(t+c))}function a(){o(".xoo-wsc-updating").show()}function e(){o(".xoo-wsc-updating").hide()}function n(t){o.each(t.target.classList,function(t,c){"xoo-wsc-container"==c||"xoo-wsc-close"!=c&&"xoo-wsc-opac"!=c&&"xoo-wsc-basket"!=c&&"xoo-wsc-cont"!=c||o(".xoo-wsc-modal , body").removeClass("xoo-wsc-active")})}function s(t,c){o(document.body).trigger("adding_to_cart",[t,c]),o.ajax({url:xoo_wsc_localize.wc_ajax_url.toString().replace("%%endpoint%%","xoo_wsc_add_to_cart"),type:"POST",data:o.param(c),success:function(c){_(t),c.fragments?o(document.body).trigger("added_to_cart",[c.fragments,c.cart_hash,t]):c.error?i("error",c.error):console.log(c)}})}function r(t,c){o.ajax({url:xoo_wsc_localize.wc_ajax_url.toString().replace("%%endpoint%%","xoo_wsc_update_cart"),type:"POST",data:{cart_key:t,new_qty:c},success:function(t){if(t.fragments){var c=t.fragments,a=t.cart_hash;if(o.each(t.fragments,function(t,c){o(t).replaceWith(c),o(t).stop(!0).css("opacity","1").unblock()}),wc_cart_fragments_params){var e=wc_cart_fragments_params.ajax_url.toString()+"-wc_cart_hash";sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(c)),localStorage.setItem(e,a),sessionStorage.setItem(e,a)}o(document.body).trigger("wc_fragments_loaded")}else i("error",t.error)}})}function i(t,c){o(".xoo-wsc-notice").html(c).attr("class","xoo-wsc-notice").addClass("xoo-wsc-nt-"+t),o(".xoo-wsc-notice-box").fadeIn("fast"),clearTimeout(a);var a=setTimeout(function(){o(".xoo-wsc-notice-box").fadeOut("slow")},2e3)}function d(o){1==xoo_wsc_localize.atc_icons&&(0!==o.find(".xoo-wsc-icon-atc").length?o.find(".xoo-wsc-icon-atc").attr("class","xoo-wsc-icon-spinner2 xoo-wsc-icon-atc xoo-wsc-active"):o.append('<span class="xoo-wsc-icon-spinner2 xoo-wsc-icon-atc xoo-wsc-active"></span>'))}function _(o){1==xoo_wsc_localize.atc_icons&&o.find(".xoo-wsc-icon-atc").attr("class","xoo-wsc-icon-checkmark xoo-wsc-icon-atc")}o(document.body).on("wc_fragment_refresh",a),o(document.body).on("wc_fragments_refreshed wc_fragments_loaded",function(){c(),e()}),xoo_wsc_localize.added_to_cart||o(document.body).trigger("wc_fragment_refresh"),o(".xoo-wsc-basket").on("click",t),c(),o(window).resize(function(){c()}),function(){if(xoo_wsc_localize.added_to_cart){var c=!1;o(document).on("wc_fragments_refreshed",function(){c||(setTimeout(t,1,"show"),c=!0)})}}(),1==xoo_wsc_localize.auto_open_cart&&o(document).on("added_to_cart",function(){setTimeout(t,1,"show")}),o("body").on("click",".xoo-wsc-close , .xoo-wsc-opac , .xoo-wsc-cont",function(o){o.preventDefault(),n(o)}),o(document).on("click",".xoo-wsc-remove",function(t){t.preventDefault(),a();var c=o(this).parents(".xoo-wsc-product"),e=c.data("xoo_wsc");r(e,0)}),1==xoo_wsc_localize.ajax_atc&&o(document).on("submit","form.cart",function(t){t.preventDefault(),a();var c=o(this),e=c.find('button[type="submit"]');d(e);var n=c.serializeArray();e.attr("name")&&"add-to-cart"==e.attr("name")&&e.attr("value")&&n.push({name:"add-to-cart",value:e.attr("value")}),n.push({name:"action",value:"xoo_wsc_add_to_cart"}),s(e,n)})});